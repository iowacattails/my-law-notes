<!DOCTYPE html>
<html>
<head>
  <title>Upload Image to GitHub</title>
  <meta charset="utf-8">
  <style>
    body {font-family:Arial;background:#111;color:#fff;padding:20px}
    input,button{padding:15px;font-size:18px;margin:10px 0}
    button{background:#d4af37;color:#000;border:none;border-radius:8px;cursor:pointer}
  </style>
</head>
<body>
  <h1 style="color:#d4af37">Upload Image to my-law-notes/images</h1>
  <input type="file" id="file" accept="image/*"><br>
  <input type="text" id="name" placeholder="filename.jpg" style="width:100%">
  <button onclick="upload()">UPLOAD IMAGE</button>
  <pre id="out"></pre>

<script>
async function upload() {
  const file = document.getElementById('file').files[0];
  const name = document.getElementById('name').value || file.name;
  if (!file) return alert("Pick a file");
  const reader = new FileReader();
  reader.onload = async e => {
    const b64 = e.target.result.split(',')[1];
    const r = await fetch("https://api.github.com/repos/iowacattails/my-law-notes/contents/images/" + name, {
      method: "PUT",
      headers: { 
        "Authorization": "token github_pat_11AAL7ESA0YOUR_TOKEN_HERE", 
        "Accept": "application/vnd.github.v3+json"
      },
      body: JSON.stringify({
        message: "Upload image " + name,
        content: b64,
        branch: "main"
      })
    });
    const json = await r.json();
    if (r.ok) {
      document.getElementById('out').textContent = "SUCCESS!\nImage URL:\nhttps://iowacattails.github.io/my-law-notes/images/" + name;
    } else {
      document.getElementById('out').textContent = "ERROR:\n" + JSON.stringify(json, null, 2);
    }
  };
  reader.readAsDataURL(file);
}
</script>
</body>
</html>
