<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Image Uploader</title>
<style>
  body{background:#ff0;font-family:Arial;text-align:center;padding:40px;}
  h1{font-size:3em;}
  #drop{background:#fff;border:6px dashed #000;padding:60px;margin:40px auto;max-width:600px;cursor:pointer;}
  button{width:90%;padding:25px;margin:30px auto;font-size:2em;background:#000;color:#ff0;border:none;cursor:pointer;}
</style>
</head>
<body>
<h1>Drop Photo Here</h1>
<div id="drop">Drag image or click</div>
<input type="file" accept="image/*" id="file" style="display:none;">
<p id="result"></p>
<button onclick="openPublisher()">OPEN PUBLISHER WITH THIS IMAGE</button>
<a href="publisher.html" style="font-size:1.5em;color:#000;display:block;margin:40px;">← Back to Publisher</a>
<script>
let lastUrl = '';
document.getElementById('drop').onclick=()=>document.getElementById('file').click();
document.getElementById('file').onchange=e=>upload(e.target.files[0]);
document.getElementById('drop').ondragover=e=>e.preventDefault();
document.getElementById('drop').ondrop=e=>{e.preventDefault();upload(e.dataTransfer.files[0])}

function upload(file){
  if(!file||!file.type.startsWith('image/'))return;
  const reader=new FileReader();
  reader.onload=e=>{
    const name=prompt("Image name (e.g. vicinage.jpg)",file.name)||file.name;
    const url=`https://github.com/iowacattails/my-law-notes/upload/images-experiment/images?filename=${name}`;
    window.open(url,'_blank');
    lastUrl=`images/${name}`;
    document.getElementById('result').innerHTML=`<br>Image opened — commit it!<br>URL: ${lastUrl}`;
  };
  reader.readAsDataURL(file);
}

function openPublisher(){
  if(lastUrl) window.open(`publisher.html?img=${encodeURIComponent(lastUrl)}`,'_blank');
  else alert("Upload an image first!");
}
</script>
</body>
</html>
